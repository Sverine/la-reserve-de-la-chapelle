{% extends 'base.html.twig' %}

{% block title %}Livres | La Réserve de la Chapelle{% endblock %}

{% block body %}
    <div class="container-fluid dashboard">
        <div class="row col">
            {{ include ('_dashboard-navigation.html.twig') }}
            <div class="col mt-3 ms-5">
                {{ include ('_navigation.html.twig') }}

                {# TITLE OF DASHBOARD]#}
                <section class="mt-5 pt-5 me-5 d-flex align-items-center justify-content-between">
                    <h1 class="mt-5">Les livres</h1>
                    <button type="button" class="btn btn-primary px-5 mt-5 me-5">
                        <a class="text-white text-decoration-none text-uppercase fw-normal" href="{{ path('book_new') }}">+ Ajouter un livre</a>
                    </button>
                </section>

                <section class="mt-5 pt-5">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                            <tr>
                                <th class="fw-bold border-0">Titre</th>
                                <th class="fw-bold border-0">Auteur</th>
                                <th class="fw-bold border-0">Date de parution</th>
                                <th class="fw-bold border-0">Statut</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for book in books %}
                                <tr>
                                    <td class="border-0">{{ book.title }}</td>
                                    <td class="border-0">{{ book.author }}</td>
                                    <td class="border-0">{{ book.publishedAt ? book.publishedAt|date('d/m/Y') : '' }}</td>
                                    <td class="border-0">{% if book.isReserved %}Réservé{% else %}Disponible{% endif %}</td>
                                    <td class="border-0 d-flex">
                                        {# APERCU #}
                                        <a href="{{ path('book_show', {'id': book.id}) }}" class="me-2">
                                            <svg width="23" height="23" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M4.02024 17.8514C3.78297 17.5084 3.5893 17.2104 3.44148 16.9748C3.57647 16.7434 3.75292 16.4526 3.96993 16.1187C4.54918 15.2276 5.40923 14.042 6.53125 12.8609C8.79436 10.4787 11.9886 8.25 16 8.25C20.001 8.25 23.0649 10.4685 25.1959 12.8362C26.254 14.0119 27.0516 15.1927 27.5844 16.0806C27.7959 16.4332 27.9645 16.7375 28.0898 16.9742C27.9517 17.2146 27.7659 17.5259 27.5339 17.8874C26.9606 18.7809 26.1138 19.9686 25.0199 21.1512C22.8052 23.5454 19.7395 25.75 16 25.75C12.2492 25.75 9.05424 23.5343 6.7075 21.1274C5.54969 19.9399 4.64022 18.7478 4.02024 17.8514ZM30.6395 16.4861C30.6397 16.4866 30.6399 16.487 29.5 17L30.6176 17.5599L30.6171 17.561L30.6156 17.5638L30.6114 17.5723L30.5973 17.5999C30.5854 17.6229 30.5686 17.6553 30.547 17.6962C30.5037 17.7782 30.4409 17.8947 30.3589 18.041C30.1949 18.3335 29.9537 18.7456 29.638 19.2376C29.0082 20.2191 28.0737 21.5314 26.8551 22.8488C24.4448 25.4546 20.7605 28.25 16 28.25C11.2508 28.25 7.44576 25.4657 4.9175 22.8726C3.63781 21.5601 2.64103 20.2522 1.96414 19.2736C1.62491 18.7831 1.36399 18.3724 1.18614 18.0812C1.09717 17.9355 1.02884 17.8195 0.981772 17.7381C0.958232 17.6974 0.939993 17.6653 0.927131 17.6425L0.911875 17.6153L0.907285 17.607L0.90473 17.6024L2 17C0.881966 16.441 0.882182 16.4406 0.882417 16.4401L0.882985 16.4389L0.884468 16.436L0.888828 16.4274L0.903113 16.3994C0.915105 16.3761 0.932038 16.3435 0.953884 16.3023C0.997566 16.2199 1.06094 16.1028 1.14378 15.956C1.30937 15.6626 1.55331 15.2494 1.87382 14.7563C2.51332 13.7724 3.46577 12.458 4.71875 11.1391C7.20563 8.52129 11.0114 5.75 16 5.75C20.999 5.75 24.6851 8.53154 27.0541 11.1638C28.246 12.4881 29.1359 13.8073 29.7281 14.7944C30.025 15.2892 30.2491 15.7039 30.4007 15.9986C30.4765 16.1461 30.5343 16.2638 30.5742 16.3468C30.5941 16.3883 30.6095 16.4211 30.6205 16.4447L30.6335 16.4731L30.6376 16.4819L30.6389 16.4849L30.6395 16.4861ZM0.90473 17.6024C0.706792 17.2425 0.698283 16.8083 0.881966 16.441L2 17C0.912004 17.5984 0.904547 17.602 0.904726 17.6024L0.90473 17.6024ZM30.6176 17.5599C30.7856 17.224 30.794 16.8295 30.6399 16.487L29.5 17C30.618 17.559 30.6178 17.5594 30.6176 17.5599ZM19.5 17C19.5 18.933 17.933 20.5 16 20.5C14.067 20.5 12.5 18.933 12.5 17C12.5 15.067 14.067 13.5 16 13.5C17.933 13.5 19.5 15.067 19.5 17ZM22 17C22 20.3137 19.3137 23 16 23C12.6863 23 10 20.3137 10 17C10 13.6863 12.6863 11 16 11C19.3137 11 22 13.6863 22 17Z" fill="black"/>
                                            </svg>
                                        </a>

                                        {# MODIFIEE #}
                                        <a href="{{ path('book_edit', {'id': book.id}) }}">
                                            <svg width="23" height="23" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M17.4164 5.7316C17.417 5.62741 17.397 5.52413 17.3576 5.42767C17.3182 5.33122 17.2601 5.24349 17.1868 5.16952L13.8301 1.81285C13.7561 1.73948 13.6684 1.68143 13.5719 1.64203C13.4755 1.60263 13.3722 1.58266 13.268 1.58327C13.1638 1.58266 13.0606 1.60263 12.9641 1.64203C12.8676 1.68143 12.7799 1.73948 12.7059 1.81285L10.4655 4.05327L1.8126 12.7062C1.73923 12.7802 1.68118 12.8679 1.64179 12.9643C1.60239 13.0608 1.58242 13.1641 1.58302 13.2683V16.6249C1.58302 16.8349 1.66643 17.0363 1.81489 17.1847C1.96336 17.3332 2.16472 17.4166 2.37469 17.4166H5.73135C5.84213 17.4226 5.95294 17.4053 6.05659 17.3657C6.16024 17.3262 6.25442 17.2653 6.33302 17.187L14.9384 8.5341L17.1868 6.33327C17.259 6.25654 17.3179 6.16823 17.3609 6.07202C17.3686 6.00891 17.3686 5.94512 17.3609 5.88202C17.3646 5.84516 17.3646 5.80803 17.3609 5.77118L17.4164 5.7316ZM5.40677 15.8333H3.16635V13.5928L11.0276 5.7316L13.268 7.97202L5.40677 15.8333ZM14.3843 6.85577L12.1439 4.61535L13.268 3.4991L15.5005 5.7316L14.3843 6.85577Z" fill="#262626"/>
                                            </svg>
                                        </a>

                                        <form method="post" action="{{ path('book_delete', {'id': book.id}) }}" onsubmit="return confirm('Etes-vous sur de vouloir supprimer ce livre ?');">
                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ book.id) }}">
                                            <button class="border-0 bg-transparent">
                                                <svg width="23" height="23" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M21.657 23.5425C22.1777 24.0632 23.0219 24.0632 23.5426 23.5425C24.0633 23.0218 24.0633 22.1775 23.5426 21.6568L17.8858 16L23.5426 10.3432C24.0633 9.82246 24.0633 8.97824 23.5426 8.45754C23.0219 7.93684 22.1777 7.93684 21.657 8.45754L16.0001 14.1144L10.3433 8.45751C9.82258 7.93681 8.97836 7.93681 8.45766 8.45751C7.93697 8.97821 7.93696 9.82243 8.45766 10.3431L14.1145 16L8.45766 21.6569C7.93696 22.1776 7.93696 23.0218 8.45766 23.5425C8.97836 24.0632 9.82258 24.0632 10.3433 23.5425L16.0001 17.8856L21.657 23.5425Z" fill="black"/>
                                                </svg>
                                            </button>
                                        </form>
                                    </td>

                                    {#  <td>
                                        <a href="{{ path('agent_show', {'id': agent.id}) }}">
                                            <svg width="23" height="23" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M4.02024 17.8514C3.78297 17.5084 3.5893 17.2104 3.44148 16.9748C3.57647 16.7434 3.75292 16.4526 3.96993 16.1187C4.54918 15.2276 5.40923 14.042 6.53125 12.8609C8.79436 10.4787 11.9886 8.25 16 8.25C20.001 8.25 23.0649 10.4685 25.1959 12.8362C26.254 14.0119 27.0516 15.1927 27.5844 16.0806C27.7959 16.4332 27.9645 16.7375 28.0898 16.9742C27.9517 17.2146 27.7659 17.5259 27.5339 17.8874C26.9606 18.7809 26.1138 19.9686 25.0199 21.1512C22.8052 23.5454 19.7395 25.75 16 25.75C12.2492 25.75 9.05424 23.5343 6.7075 21.1274C5.54969 19.9399 4.64022 18.7478 4.02024 17.8514ZM30.6395 16.4861C30.6397 16.4866 30.6399 16.487 29.5 17L30.6176 17.5599L30.6171 17.561L30.6156 17.5638L30.6114 17.5723L30.5973 17.5999C30.5854 17.6229 30.5686 17.6553 30.547 17.6962C30.5037 17.7782 30.4409 17.8947 30.3589 18.041C30.1949 18.3335 29.9537 18.7456 29.638 19.2376C29.0082 20.2191 28.0737 21.5314 26.8551 22.8488C24.4448 25.4546 20.7605 28.25 16 28.25C11.2508 28.25 7.44576 25.4657 4.9175 22.8726C3.63781 21.5601 2.64103 20.2522 1.96414 19.2736C1.62491 18.7831 1.36399 18.3724 1.18614 18.0812C1.09717 17.9355 1.02884 17.8195 0.981772 17.7381C0.958232 17.6974 0.939993 17.6653 0.927131 17.6425L0.911875 17.6153L0.907285 17.607L0.90473 17.6024L2 17C0.881966 16.441 0.882182 16.4406 0.882417 16.4401L0.882985 16.4389L0.884468 16.436L0.888828 16.4274L0.903113 16.3994C0.915105 16.3761 0.932038 16.3435 0.953884 16.3023C0.997566 16.2199 1.06094 16.1028 1.14378 15.956C1.30937 15.6626 1.55331 15.2494 1.87382 14.7563C2.51332 13.7724 3.46577 12.458 4.71875 11.1391C7.20563 8.52129 11.0114 5.75 16 5.75C20.999 5.75 24.6851 8.53154 27.0541 11.1638C28.246 12.4881 29.1359 13.8073 29.7281 14.7944C30.025 15.2892 30.2491 15.7039 30.4007 15.9986C30.4765 16.1461 30.5343 16.2638 30.5742 16.3468C30.5941 16.3883 30.6095 16.4211 30.6205 16.4447L30.6335 16.4731L30.6376 16.4819L30.6389 16.4849L30.6395 16.4861ZM0.90473 17.6024C0.706792 17.2425 0.698283 16.8083 0.881966 16.441L2 17C0.912004 17.5984 0.904547 17.602 0.904726 17.6024L0.90473 17.6024ZM30.6176 17.5599C30.7856 17.224 30.794 16.8295 30.6399 16.487L29.5 17C30.618 17.559 30.6178 17.5594 30.6176 17.5599ZM19.5 17C19.5 18.933 17.933 20.5 16 20.5C14.067 20.5 12.5 18.933 12.5 17C12.5 15.067 14.067 13.5 16 13.5C17.933 13.5 19.5 15.067 19.5 17ZM22 17C22 20.3137 19.3137 23 16 23C12.6863 23 10 20.3137 10 17C10 13.6863 12.6863 11 16 11C19.3137 11 22 13.6863 22 17Z" fill="black"/>
                                            </svg>
                                        </a>
                                        <a href="{{ path('agent_edit', {'id': agent.id}) }}">
                                            <svg width="23" height="23" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M21.7516 12.6471L19.866 10.7615L8.33521 22.2922L7.42877 25.0843L10.2208 24.1778L21.7516 12.6471ZM11.6535 26.5164L3.27734 29.2357L5.99665 20.8595L19.866 6.99022L25.5228 12.6471L11.6535 26.5164Z" fill="black"/>
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M27.4085 3.21898C26.3671 2.17758 24.6786 2.17758 23.6373 3.21898L21.7516 5.10459L27.4085 10.7614L29.2941 8.87583C30.3355 7.83443 30.3355 6.14599 29.2941 5.10459L27.4085 3.21898Z" fill="black"/>
                                            </svg>
                                        </a>
                                        <form method="post" action="{{ path('agent_delete', {'id': agent.id}) }}" onsubmit="return confirm('Etes-vous sur de vouloir supprimer cet agent spécial ?');">
                                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ agent.id) }}">
                                            <button>
                                                <svg width="23" height="23" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M21.657 23.5425C22.1777 24.0632 23.0219 24.0632 23.5426 23.5425C24.0633 23.0218 24.0633 22.1775 23.5426 21.6568L17.8858 16L23.5426 10.3432C24.0633 9.82246 24.0633 8.97824 23.5426 8.45754C23.0219 7.93684 22.1777 7.93684 21.657 8.45754L16.0001 14.1144L10.3433 8.45751C9.82258 7.93681 8.97836 7.93681 8.45766 8.45751C7.93697 8.97821 7.93696 9.82243 8.45766 10.3431L14.1145 16L8.45766 21.6569C7.93696 22.1776 7.93696 23.0218 8.45766 23.5425C8.97836 24.0632 9.82258 24.0632 10.3433 23.5425L16.0001 17.8856L21.657 23.5425Z" fill="black"/>
                                                </svg>
                                            </button>
                                        </form>
                                    </td>#}
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </section>
            </div>
        </div>
    </div>
{% endblock %}
